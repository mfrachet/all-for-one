export const tables = `
CREATE TABLE all.mixpanel_events ( event_name String, event_id String, community_id String, created_at DateTime ) ENGINE = MergeTree ORDER BY (event_name, created_at, community_id, event_id) SETTINGS index_granularity = 8192;
CREATE TABLE all.coupons (metadata String, updated_by_event_type String, times_redeemed Int64, percent_off_precise Float32, livemode Bool, object String, redeem_by Nullable(DateTime), duration String, id String, valid Bool, currency String, duration_in_months Int64, name String, max_redemptions Int64, amount_off Int64, created Nullable(DateTime), percent_off Float32, updated Nullable(DateTime), _sdc_extracted_at Nullable(DateTime), _sdc_received_at Nullable(DateTime), _sdc_batched_at Nullable(DateTime), _sdc_deleted_at Nullable(DateTime), _sdc_sequence Int64, _sdc_table_version Int64, _sdc_sync_started_at Int64) ENGINE = MergeTree PRIMARY KEY id ORDER BY id SETTINGS index_granularity = 8192                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
CREATE TABLE all.customers ( metadata String, updated_by_event_type String, preferred_locales String, invoice_settings String, name String, tax_exempt String, next_invoice_sequence Int64, balance Int64, phone String, address String, shipping String, sources String, tax_ids String, delinquent Bool, description String, livemode Bool, default_source String, cards String, email String, default_card String, subscriptions String, discount String, account_balance Int64, currency String, id String, invoice_prefix String, tax_info_verification String, object String, created Nullable(DateTime), tax_info String, updated Nullable(DateTime), _sdc_extracted_at Nullable(DateTime), _sdc_received_at Nullable(DateTime), _sdc_batched_at Nullable(DateTime), _sdc_deleted_at Nullable(DateTime), _sdc_sequence Int64, _sdc_table_version Int64, _sdc_sync_started_at Int64, customers.communityId String, customers.communityName String, customers.communitySubdomain String, communityId Nullable(String), communityName Nullable(String), communitySubdomain Nullable(String) ) ENGINE = MergeTree ORDER BY id SETTINGS index_granularity = 8192;
CREATE TABLE all.plans (nickname String, updated_by_event_type String, amount_decimal String, tiers String, object String, aggregate_usage String, created Nullable(DateTime), statement_description String, product String, statement_descriptor String, interval_count Int64, transform_usage String, name String, amount Int64, interval String, id String, trial_period_days Int64, usage_type String, active Bool, tiers_mode String, billing_scheme String, livemode Bool, currency String, metadata String, updated Nullable(DateTime), _sdc_extracted_at Nullable(DateTime), _sdc_received_at Nullable(DateTime), _sdc_batched_at Nullable(DateTime), _sdc_deleted_at Nullable(DateTime), _sdc_sequence Int64, _sdc_table_version Int64, _sdc_sync_started_at Int64) ENGINE = MergeTree PRIMARY KEY id ORDER BY id SETTINGS index_granularity = 8192                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
CREATE TABLE all.products (id String, object String, updated_by_event_type String, active Bool, attributes String, caption String, created Nullable(DateTime), deactivate_on String, description String, images String, livemode Bool, metadata String, name String, package_dimensions String, shippable Bool, statement_descriptor String, type String, unit_label String, updated Nullable(DateTime), url String, tax_code String, _sdc_extracted_at Nullable(DateTime), _sdc_received_at Nullable(DateTime), _sdc_batched_at Nullable(DateTime), _sdc_deleted_at Nullable(DateTime), _sdc_sequence Int64, _sdc_table_version Int64, _sdc_sync_started_at Int64) ENGINE = MergeTree PRIMARY KEY id ORDER BY id SETTINGS index_granularity = 8192                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
CREATE TABLE all.subscription_items (metadata String, canceled_at Nullable(DateTime), current_period_end Nullable(DateTime), plan String, tax_rates String, price String, subscription String, trial_start Nullable(DateTime), created Nullable(DateTime), cancel_at_period_end Bool, quantity Int64, tax_percent Float32, current_period_start Nullable(DateTime), start Nullable(DateTime), billing_thresholds String, discount String, application_fee_percent Float32, id String, status String, customer String, object String, livemode Bool, ended_at Nullable(DateTime), trial_end Nullable(DateTime), _sdc_extracted_at Nullable(DateTime), _sdc_received_at Nullable(DateTime), _sdc_batched_at Nullable(DateTime), _sdc_deleted_at Nullable(DateTime), _sdc_sequence Int64, _sdc_table_version Int64, _sdc_sync_started_at Int64) ENGINE = MergeTree PRIMARY KEY id ORDER BY id SETTINGS index_granularity = 8192                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
CREATE TABLE all.subscriptions (metadata String, canceled_at Nullable(DateTime), updated_by_event_type String, schedule String, next_pending_invoice_item_invoice Nullable(DateTime), cancel_at Nullable(DateTime), invoice_customer_balance_settings String, pending_invoice_item_interval String, pause_collection String, transfer_data String, latest_invoice String, billing_thresholds String, pending_setup_intent String, start_date Nullable(DateTime), collection_method String, default_source String, default_payment_method String, livemode Bool, start Nullable(DateTime), items String, id String, trial_start Nullable(DateTime), application_fee_percent Float32, billing_cycle_anchor Nullable(DateTime), cancel_at_period_end Bool, tax_percent Float32, discount String, current_period_end Nullable(DateTime), plan String, billing String, quantity Int64, days_until_due Int64, status String, created Nullable(DateTime), ended_at Nullable(DateTime), customer String, current_period_start Nullable(DateTime), trial_end Nullable(DateTime), object String, updated Nullable(DateTime), _sdc_extracted_at Nullable(DateTime), _sdc_received_at Nullable(DateTime), _sdc_batched_at Nullable(DateTime), _sdc_deleted_at Nullable(DateTime), _sdc_sequence Int64, _sdc_table_version Int64, _sdc_sync_started_at Int64) ENGINE = MergeTree PRIMARY KEY id ORDER BY id SETTINGS index_granularity = 8192                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   


Customer table has a property called subscriptions but it is better to join with the subscriptions table instead using the customer id.
Each subscription has a property called items that is an array of strings, each string is the id of a subscription item.
Each subscription item has a property called price that is a string containing a JSON object that has an id pointing to the price id and product that points to the product id.
If someone asks for plan, they probably mean product and they will usually search using the product name. Also people are bad with name so not try to look for an exact match. 

So for example, to get the product name, you would need to join the subscriptions table with the subscription_items table using the subscription id and then join with the products table using the product id.

Joins can be done between mixpanel_events and customers using the community_id. Also if someone ask for communities, it would be nice to display the community name.
`;
